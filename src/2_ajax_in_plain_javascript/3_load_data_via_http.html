<section>
    <h3>Daten vom Backend laden</h3>
</section>
<section>
    <h4>XML Http Request</h4>
    <pre>
        <code class="javascript" data-line-numbers="|2|3-6|7|8|9">function showDadJoke() {
    const xhr = new XMLHttpRequest();
    xhr.onload = () => {
        const joke = JSON.parse(xhr.response);
        document.getElementById('joke').innerHTML = joke.joke;
    }
    xhr.open('GET', 'https://icanhazdadjoke.com/', true);
    xhr.setRequestHeader('Accept', 'application/json');
    xhr.send(); 
}       </code>
    </pre>
    <aside class="notes">
        <ul>
            <li>Daten können wir in Javascript mit einem XMLHttpRequest aus dem Backend laden.</li>
            <li>Der "onload" Parameter ist ein Callback.
                <ul>
                    <li>Wie wir zuvor gelernt haben, wird die Funktion, die wir hier übergeben, zu späterem Zeitpunkt aufgerufen.</li>
                    <li>Genauer gesagt wird die Funktion aufgerufen, wenn wir eine Antwort vom Backend erhalten haben.</li>
                </ul>
            </li>
            <li>Der "open" Funktion können wir die HTTP Methode und die URL übergeben, damit das XMLHttpRequest Objekt weiß, was es aufrufen soll.
                <ul>
                    <li>Backendrequests können zum Teil etwas länger dauern. Möglicherweise wollen wir nicht so lange auf eine Antwort vom Backend warten.</li>
                    <li>Der letzte Parameter der "open" Funktion gibt an, ob der Backendrequest asynchron oder synchron laufen soll.</li>
                    <li>Wie wir auch zuvor gelernt haben, brauchen wir bei asynchronem Code nicht zu warten und es kann bereits weiterer Code ausgeführt werden.</li>
                    <li>Testet dies gerne mal in der nachfolgenden Übung aus.</li>
                </ul>
            </li>
            <li>In unserem Fall müssen wir der API angeben, welchen Datentyp wir zurückerwarten.</li>
            <li>Dies machen wir mit einem Request Header.</li>
            <li>Die "send" Funktion startet abschließend den Backendrequest.</li>
        </ul>
    </aside>
</section>
<section>
    <h4>Praxis</h4>
    <p>Branch: "step_3"</p>
    <aside class="notes">
        <ul>
            <li>Testet gerne mal mit dem async Parameter der "open" Funktion.</li>
            <li>Wie verhält sich darauffolgender Code?</li>
        </ul>
    </aside>
</section>
<section>
    <h4>Praxis: Mehrere Backendrequests</h4>
    <ul>
        <li>Schickt mehrere Backendrequests nacheinander ab</li>
        <li>Falls ihr nicht weiter wisst: Branch "step_4"</li>
        <li>Wie kann ich die Requests parallel abschicken, um Zeit zu sparen?</li>
    </ul>
</section>
<section>
    <h4>Netzwerkkonsole</h4>
    <ul>
        <li>Schaut in die Netzwerkkonsole eures Browsers, wenn ihr mit den verschiedenen Calls testet</li>
        <li>Hier bekommt ihr angezeigt, wie lange der Request dauert</li>
        <li>Ihr könnt außerdem sehen, ob sie nacheinander oder parallel abgeschickt werden</li>
    </ul>
</section>
<section>
    <h4>Praxis: Advanced</h4>
    <p>Wie muss der Code aussehen, wenn wir sie gleichzeitig senden wollen, wir aber den HTML Code erst anpassen wollen, wenn beide Witze zurückgekommen sind?</p>
</section>